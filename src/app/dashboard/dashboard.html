<div class="container mt-4">

  <!-- HEADER -->
  <div class="header">
    <div>
      <h4>Welcome, {{ username }}</h4>
      <small class="text-muted">Demo Product Dashboard</small>
    </div>

    <div class="header-actions">
      <span class="cart-count">
        Cart ({{ cartList.length }})
      </span>
      <button class="btn btn-outline-danger btn-sm" (click)="logout()">
        Logout
      </button>
    </div>
  </div>

  <!-- FILTERS -->
  <div class="filters">
    <select [(ngModel)]="selectedCategory" (change)="filterProducts()">
      <option value="">All Categories</option>
      <option value="Electronics">Electronics</option>
    </select>

    <input
      type="text"
      placeholder="Search product"
      [(ngModel)]="searchText"
      (input)="filterProducts()">
  </div>

  <!-- PRODUCTS -->
  <div class="products">
    @for (item of filteredProductList; track $index) {
      <div class="product-card">
        <img [src]="item.image" />

        <h5>{{ item.productShortName }}</h5>
        <p class="small">{{ item.description }}</p>
        <p class="price">â‚¹{{ item.price }}</p>

        <button
          class="btn btn-primary btn-sm"
          [disabled]="isInCart(item)"
          (click)="addToCart(item)">
          {{ isInCart(item) ? 'Added' : 'Add to Cart' }}
        </button>
      </div>
    }
  </div>

  <!-- EMPTY STATE -->
  @if (filteredProductList.length === 0) {
    <p class="text-center text-muted mt-4">
      No products found
    </p>
  }

  <!-- CART -->
  @if (cartList.length > 0) {
    <div class="cart">
      <h5>Cart Items</h5>

      <ul>
        @for (item of cartList; track $index) {
          <li>{{ item.productShortName }}</li>
        }
      </ul>

      <button class="btn btn-secondary btn-sm w-100" (click)="clearCart()">
        Clear Cart
      </button>
    </div>
  }

</div>
